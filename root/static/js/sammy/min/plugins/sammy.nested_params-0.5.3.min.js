// -- Sammy -- /plugins/sammy.nested_params.js
// http://code.quirkey.com/sammy
// Version: 0.5.3
// Built: Fri Apr 02 13:39:29 -0400 2010
(function(b){Sammy=Sammy||{};function a(d){d=unescape(d);if(d==="true"){return true}else{if(d==="false"){return false}else{return d}}}function c(h,g,i){var e,d,f;if(g.match(/^[^\[]+$/)){i[g]=a(h)}else{if(e=g.match(/^([^\[]+)\[\](.*)$/)){d=e[1];f=e[2];if(i[d]&&!b.isArray(i[d])){throw ("400 Bad Request")}if(f){e=f.match(/^\[([^\]]+)\](.*)$/);if(!e){throw ("400 Bad Request")}if(i[d]){if(i[d][i[d].length-1][e[1]]){i[d].push(c(h,e[1]+e[2],{}))}else{b.extend(true,i[d][i[d].length-1],c(h,e[1]+e[2],{}))}}else{i[d]=[c(h,e[1]+e[2],{})]}}else{if(i[d]){i[d].push(a(h))}else{i[d]=[a(h)]}}}else{if(e=g.match(/^([^\[]+)\[([^\[]+)\](.*)$/)){d=e[1];f=e[2]+e[3];if(i[d]&&b.isArray(i[d])){throw ("400 Bad Request")}if(i[d]){b.extend(true,i[d],c(h,f,i[d]))}else{i[d]=c(h,f,{})}}}}return i}Sammy.NestedParams=function(d){b.extend(d,{_parseFormParams:function(e){var f={};b.each(e.serializeArray(),function(g,h){b.extend(true,f,c(h.value,h.name,f))});return f}})}})(jQuery);